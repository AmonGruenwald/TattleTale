\doxysection{kernel.\+hpp}
\hypertarget{kernel_8hpp_source}{}\label{kernel_8hpp_source}\index{shared/kernels/kernel.hpp@{shared/kernels/kernel.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ TALE\_KERNEL\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ TALE\_KERNEL\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <fmt/core.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <fmt/format.h>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetattletale}{tattletale}}}
\DoxyCodeLine{00011\ \{}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{namespacetattletale_a58dcf4c550c5f0a27c234f34489e6670}{KernelType}}}
\DoxyCodeLine{00016\ \ \ \ \ \{}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ kNone,}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ kResource,}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ kEmotion,}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ kRelationship,}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ kInteraction,}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ kGoal,}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ kLast}
\DoxyCodeLine{00024\ \ \ \ \ \};}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{class\ }Actor;}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{class\ }Interaction;}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtattletale_1_1_kernel}{Kernel}}}
\DoxyCodeLine{00037\ \ \ \ \ \{}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{classtattletale_1_1_kernel_a93b365fcda5e3698083beb777aff99f3}{name\_}};}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtattletale_1_1_kernel_acdcd074e1cd7ad2b9b609b1c236ecb55}{id\_}};}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtattletale_1_1_kernel_afab1808227fd1d3db2908c8dc163b6eb}{tick\_}};}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacetattletale_a58dcf4c550c5f0a27c234f34489e6670}{KernelType}}\ \mbox{\hyperlink{classtattletale_1_1_kernel_af6032d677e09bf99c41f180de38cc835}{type\_}};}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classtattletale_1_1_kernel_ae443c5ca39fc431ebdfc0c668b29c417}{\string~Kernel}}();}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classtattletale_1_1_kernel_a3649e09f7bb2c8e5a6fa39dcbf667962}{AddConsequence}}(\mbox{\hyperlink{classtattletale_1_1_kernel}{Kernel}}\ *consequence);}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<Kernel\ *>\ \&\mbox{\hyperlink{classtattletale_1_1_kernel_a722c702ebf255e76ecb5292d41915ce6}{GetConsequences}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keyword}{const}\ std::vector<Kernel\ *>\ \&\mbox{\hyperlink{classtattletale_1_1_kernel_a147e8032c06bb3aca9ad998316e2ebcb}{GetReasons}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ std::string\ \mbox{\hyperlink{classtattletale_1_1_kernel_a2df1d1bf2de3557317cdd91bcb8f1ce0}{GetDefaultDescription}}()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ std::string\ \mbox{\hyperlink{classtattletale_1_1_kernel_a604ea09606e2530e03474fec80d80afd}{GetDetailedDescription}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ std::string\ \mbox{\hyperlink{classtattletale_1_1_kernel_aaa1afd2ae2abff75a8376872e6642b0a}{GetPassiveDescription}}()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ std::string\ \mbox{\hyperlink{classtattletale_1_1_kernel_a979570cb92c953513a210f10c748c777}{GetActiveDescription}}()\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{classtattletale_1_1_kernel_a447036911c901aace53a699a11e34e07}{GetChance}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtattletale_1_1_actor}{Actor}}\ *\mbox{\hyperlink{classtattletale_1_1_kernel_a3dc8f98551c2ca59fa658dbc5ccb44c9}{GetOwner}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ std::vector<Actor\ *>\ \mbox{\hyperlink{classtattletale_1_1_kernel_a68ee2a7f0db7ecc991b9479cd6e7fa8b}{GetAllParticipants}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classtattletale_1_1_kernel_a9205adc72236be935c3f2878011c3882}{GetAbsoluteInterestScore}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ documentation}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{float}\ CalculateChanceInfluence(\textcolor{keyword}{const}\ \mbox{\hyperlink{classtattletale_1_1_interaction}{Interaction}}\ *interaction)\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ documentation}}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ IsNegativeReason(\mbox{\hyperlink{classtattletale_1_1_kernel}{Kernel}}\ *reason)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ documentation}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ IsReason(\textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ documentation}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ IsSameKernelType(\mbox{\hyperlink{classtattletale_1_1_kernel}{Kernel}}\ *other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ documentation}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ IsSameSpecificType(\mbox{\hyperlink{classtattletale_1_1_kernel}{Kernel}}\ *other)\ \textcolor{keyword}{const}\ =\ 0;}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtattletale_1_1_actor}{Actor}}\ *\mbox{\hyperlink{classtattletale_1_1_kernel_a66ab8f8a7b82c136c922b3f062224c09}{owner\_}};}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ std::vector<Kernel\ *>\ \mbox{\hyperlink{classtattletale_1_1_kernel_aeba9c27919b7917b14a711318e3d9cb3}{consequences\_}};}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ std::vector<Kernel\ *>\ \mbox{\hyperlink{classtattletale_1_1_kernel_a075e5bd7b7aec272786ae80f4ba223c7}{reasons\_}};}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtattletale_1_1_kernel}{Kernel}}(std::string\ name,\ \textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id},\ \textcolor{keywordtype}{size\_t}\ tick,\ \mbox{\hyperlink{classtattletale_1_1_actor}{Actor}}\ *owner,\ std::vector<Kernel\ *>\ reasons,\ \mbox{\hyperlink{namespacetattletale_a58dcf4c550c5f0a27c234f34489e6670}{KernelType}}\ type);}
\DoxyCodeLine{00176\ \ \ \ \ \};}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \}\ \textcolor{comment}{//\ namespace\ tattletale}}
\DoxyCodeLine{00179\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00180\ \textcolor{keyword}{struct\ }fmt::formatter<T,\ std::enable\_if\_t<std::is\_base\_of<tattletale::Kernel,\ T>::value,\ char>>\ :\ fmt::formatter<std::string>}
\DoxyCodeLine{00181\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{comment}{//\ d\ -\/\ default,\ a\ -\/\ active,\ p\ -\/\ passive,\ n\ -\/\ name,\ o\ -\/\ detailed}}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordtype}{char}\ presentation\ =\ \textcolor{charliteral}{'d'};}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ parse(format\_parse\_context\ \&ctx)\ -\/>\ \textcolor{keyword}{decltype}(ctx.begin())}
\DoxyCodeLine{00186\ \ \ \ \ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ ctx.begin(),\ end\ =\ ctx.end();}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ end\ \&\&\ (*it\ ==\ \textcolor{charliteral}{'a'}\ ||\ *it\ ==\ \textcolor{charliteral}{'p'}\ ||\ *it\ ==\ \textcolor{charliteral}{'n'}\ ||\ *it\ ==\ \textcolor{charliteral}{'d'}\ ||\ *it\ ==\ \textcolor{charliteral}{'o'}))}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ presentation\ =\ *it++;}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it\ !=\ end\ \&\&\ *it\ !=\ \textcolor{charliteral}{'\}'})}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ format\_error(\textcolor{stringliteral}{"{}invalid\ format"{}});}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ it;}
\DoxyCodeLine{00195\ \ \ \ \ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keyword}{auto}\ format(\mbox{\hyperlink{classtattletale_1_1_kernel}{tattletale::Kernel}}\ \&kernel,\ FormatContext\ \&ctx)\ -\/>\ \textcolor{keyword}{decltype}(ctx.out())}
\DoxyCodeLine{00199\ \ \ \ \ \{}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (presentation\ ==\ \textcolor{charliteral}{'a'})}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fmt::formatter<std::string>::format(kernel.\mbox{\hyperlink{classtattletale_1_1_kernel_a979570cb92c953513a210f10c748c777}{GetActiveDescription}}(),\ ctx);}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (presentation\ ==\ \textcolor{charliteral}{'p'})}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fmt::formatter<std::string>::format(kernel.\mbox{\hyperlink{classtattletale_1_1_kernel_aaa1afd2ae2abff75a8376872e6642b0a}{GetPassiveDescription}}(),\ ctx);}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (presentation\ ==\ \textcolor{charliteral}{'n'})}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fmt::formatter<std::string>::format(kernel.\mbox{\hyperlink{classtattletale_1_1_kernel_a93b365fcda5e3698083beb777aff99f3}{name\_}},\ ctx);}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (presentation\ ==\ \textcolor{charliteral}{'o'})}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fmt::formatter<std::string>::format(kernel.\mbox{\hyperlink{classtattletale_1_1_kernel_a604ea09606e2530e03474fec80d80afd}{GetDetailedDescription}}(),\ ctx);}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fmt::formatter<std::string>::format(kernel.\mbox{\hyperlink{classtattletale_1_1_kernel_a2df1d1bf2de3557317cdd91bcb8f1ce0}{GetDefaultDescription}}(),\ ctx);}
\DoxyCodeLine{00217\ \ \ \ \ \}}
\DoxyCodeLine{00218\ \};}
\DoxyCodeLine{00219\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00220\ \textcolor{keyword}{struct\ }fmt::formatter<\mbox{\hyperlink{namespacetattletale}{tattletale}}::KernelType>\ :\ formatter<string\_view>}
\DoxyCodeLine{00221\ \{}
\DoxyCodeLine{00222\ \ \ \ \ std::string\ kernel\_type\_names[7]\ =\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}none"{}},}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}resource"{}},}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}emotion"{}},}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}relationship"{}},}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}interaction"{}},}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}goal"{}},}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}last"{}},}
\DoxyCodeLine{00230\ \ \ \ \ \};}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{comment}{//\ parse\ is\ inherited\ from\ formatter<string\_view>.}}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ FormatContext>}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keyword}{auto}\ format(\mbox{\hyperlink{namespacetattletale_a58dcf4c550c5f0a27c234f34489e6670}{tattletale::KernelType}}\ type,\ FormatContext\ \&ctx)}
\DoxyCodeLine{00234\ \ \ \ \ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ enum\_index\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(type);}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ string\_view\ name\ =\ kernel\_type\_names[enum\_index];}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ formatter<string\_view>::format(name,\ ctx);}
\DoxyCodeLine{00238\ \ \ \ \ \}}
\DoxyCodeLine{00239\ \};}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ TALE\_KERNEL\_H}}

\end{DoxyCode}
