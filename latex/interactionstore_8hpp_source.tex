\hypertarget{interactionstore_8hpp_source}{}\doxysection{interactionstore.\+hpp}
\label{interactionstore_8hpp_source}\index{tale/globals/interactionstore.hpp@{tale/globals/interactionstore.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef TALE\_GLOBALS\_INTERACTIONSTORE\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define TALE\_GLOBALS\_INTERACTIONSTORE\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}tale/kernels/interactions/interaction.hpp"{}}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}tale/kernels/interactions/interactionprototype.hpp"{}}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}tale/kernels/interactions/interactionrequirement.hpp"{}}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}tale/kernels/interactions/interactiontendency.hpp"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include "{}tale/globals/random.hpp"{}}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}tale/globals/chronicle.hpp"{}}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}tale/talecore.hpp"{}}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <nlohmann/json.hpp>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <fmt/core.h>}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacetale}{tale}}}
\DoxyCodeLine{18 \{}
\DoxyCodeLine{19     \textcolor{keyword}{class }Actor;}
\DoxyCodeLine{26     \textcolor{keyword}{class }\mbox{\hyperlink{classtale_1_1_interaction_store}{InteractionStore}}}
\DoxyCodeLine{27     \{}
\DoxyCodeLine{28     \textcolor{keyword}{public}:}
\DoxyCodeLine{36         \mbox{\hyperlink{classtale_1_1_interaction_store_a33786eeea407a0bebc37110c6bc87270}{InteractionStore}}(\mbox{\hyperlink{classtale_1_1_random}{Random}} \&random, \mbox{\hyperlink{classtale_1_1_chronicle}{Chronicle}} \&chronicle);}
\DoxyCodeLine{42         uint32\_t \mbox{\hyperlink{classtale_1_1_interaction_store_a4e17ee34360fe2b8c7e3d2a157f79e3b}{GetRandomInteractionPrototypeIndex}}() \textcolor{keyword}{const};}
\DoxyCodeLine{49         std::string \mbox{\hyperlink{classtale_1_1_interaction_store_ab0d0a7ace1561ea93fdd250171327c93}{GetInteractionName}}(\textcolor{keywordtype}{size\_t} prototype\_index) \textcolor{keyword}{const};}
\DoxyCodeLine{59         \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} \&\mbox{\hyperlink{classtale_1_1_interaction_store_a35702f3bfc7af3856ef1c7b07aadba1e}{GetParticipantCount}}(\textcolor{keywordtype}{size\_t} prototype\_index) \textcolor{keyword}{const};}
\DoxyCodeLine{67         \textcolor{keyword}{const} std::vector<float> \&\mbox{\hyperlink{classtale_1_1_interaction_store_a4a531cb8ddffe4381108ca8c4b9af4aa}{GetWealthEffects}}(\textcolor{keywordtype}{size\_t} prototype\_index) \textcolor{keyword}{const};}
\DoxyCodeLine{75         \textcolor{keyword}{const} std::vector<std::map<EmotionType, float>> \&\mbox{\hyperlink{classtale_1_1_interaction_store_a639dde8e7d95fe883fd85be9491bea45}{GetEmotionEffects}}(\textcolor{keywordtype}{size\_t} prototype\_index) \textcolor{keyword}{const};}
\DoxyCodeLine{83         \textcolor{keyword}{const} std::vector<std::map<size\_t, std::map<RelationshipType, float>>> \&\mbox{\hyperlink{classtale_1_1_interaction_store_a7805bf50e3e509c4047c304993617276}{GetRelationshipEffects}}(\textcolor{keywordtype}{size\_t} prototype\_index) \textcolor{keyword}{const};}
\DoxyCodeLine{95         std::weak\_ptr<Interaction> \mbox{\hyperlink{classtale_1_1_interaction_store_a2da545e863f778986ed1dbb219bbb433}{CreateInteraction}}(\textcolor{keywordtype}{size\_t} prototype\_index, \textcolor{keywordtype}{size\_t} tick, std::vector<std::weak\_ptr<Kernel>> reasons, std::vector<std::weak\_ptr<Actor>> participants);}
\DoxyCodeLine{101         \textcolor{keyword}{const} std::vector<Requirement> \&\mbox{\hyperlink{classtale_1_1_interaction_store_aeba185508945c3ca34c6019880d56934}{GetRequirementCatalogue}}() \textcolor{keyword}{const};}
\DoxyCodeLine{107         \textcolor{keyword}{const} std::vector<Tendency> \&\mbox{\hyperlink{classtale_1_1_interaction_store_a8aca354fe4fcadcaa4a82e95f1e4ed4b}{GetTendencyCatalogue}}() \textcolor{keyword}{const};}
\DoxyCodeLine{108 }
\DoxyCodeLine{109     \textcolor{keyword}{private}:}
\DoxyCodeLine{113         \mbox{\hyperlink{classtale_1_1_random}{Random}} \&\mbox{\hyperlink{classtale_1_1_interaction_store_aa420288116fe072c6757dc7f46870723}{random\_}};}
\DoxyCodeLine{117         \mbox{\hyperlink{classtale_1_1_chronicle}{Chronicle}} \&\mbox{\hyperlink{classtale_1_1_interaction_store_a015d0442fe626ba04d255ca3222a9399}{chronicle\_}};}
\DoxyCodeLine{121         std::vector<InteractionPrototype> \mbox{\hyperlink{classtale_1_1_interaction_store_a9b5e1bb13fd299d9a7c2cecdc7edcd9c}{prototype\_catalogue\_}};}
\DoxyCodeLine{125         std::vector<Requirement> \mbox{\hyperlink{classtale_1_1_interaction_store_ae7bff2929f7b0373e0f257f3860e0905}{requirements\_catalogue\_}};}
\DoxyCodeLine{129         std::vector<Tendency> \mbox{\hyperlink{classtale_1_1_interaction_store_af67bce01f9f22a06a7e29e25a34a6ea4}{tendencies\_catalogue\_}};}
\DoxyCodeLine{133         std::string \mbox{\hyperlink{classtale_1_1_interaction_store_ad6d0dd8803d84e0eddf5a0e5fd621075}{prototype\_json\_path\_}} = \textcolor{stringliteral}{"{}tale/resources/interactioncatalogue.json"{}};}
\DoxyCodeLine{134 }
\DoxyCodeLine{135         \textcolor{keyword}{const} std::string name\_key\_ = \textcolor{stringliteral}{"{}name"{}};}
\DoxyCodeLine{136         \textcolor{keyword}{const} std::string participant\_count\_key\_ = \textcolor{stringliteral}{"{}participant\_count"{}};}
\DoxyCodeLine{137         \textcolor{keyword}{const} std::string wealth\_key\_ = \textcolor{stringliteral}{"{}wealth"{}};}
\DoxyCodeLine{138         \textcolor{keyword}{const} std::string emotion\_key\_ = \textcolor{stringliteral}{"{}emotions"{}};}
\DoxyCodeLine{139         \textcolor{keyword}{const} std::vector<std::string> emotion\_type\_keys\_ = \{\textcolor{stringliteral}{"{}happy"{}}, \textcolor{stringliteral}{"{}calm"{}}, \textcolor{stringliteral}{"{}satisfied"{}}, \textcolor{stringliteral}{"{}brave"{}}, \textcolor{stringliteral}{"{}extroverted"{}}\};}
\DoxyCodeLine{140         \textcolor{keyword}{const} std::vector<std::string> context\_type\_keys\_ = \{\textcolor{stringliteral}{"{}course"{}}, \textcolor{stringliteral}{"{}freetime"{}}\};}
\DoxyCodeLine{141         \textcolor{keyword}{const} std::string relationship\_key\_ = \textcolor{stringliteral}{"{}relationships"{}};}
\DoxyCodeLine{142         \textcolor{keyword}{const} std::string participant\_key\_ = \textcolor{stringliteral}{"{}participant"{}};}
\DoxyCodeLine{143         \textcolor{keyword}{const} std::string changes\_key\_ = \textcolor{stringliteral}{"{}changes"{}};}
\DoxyCodeLine{144         \textcolor{keyword}{const} std::vector<std::string> relationship\_type\_keys\_ = \{\textcolor{stringliteral}{"{}love"{}}, \textcolor{stringliteral}{"{}attraction"{}}, \textcolor{stringliteral}{"{}friendship"{}}, \textcolor{stringliteral}{"{}anger"{}}, \textcolor{stringliteral}{"{}protective"{}}\};}
\DoxyCodeLine{145         \textcolor{keyword}{const} std::string context\_key\_ = \textcolor{stringliteral}{"{}context"{}};}
\DoxyCodeLine{146         \textcolor{keyword}{const} std::string group\_size\_key\_ = \textcolor{stringliteral}{"{}group\_size"{}};}
\DoxyCodeLine{147         \textcolor{keywordtype}{bool} ReadPrototypeJSON(nlohmann::json json, \textcolor{keywordtype}{size\_t} participant\_count, std::string error\_preamble, InteractionPrototype \&out\_prototype);}
\DoxyCodeLine{148         \textcolor{keywordtype}{bool} ReadRequirementJSON(nlohmann::json json, std::string error\_preamble, Requirement \&out\_requirement);}
\DoxyCodeLine{149         \textcolor{keywordtype}{bool} ReadTendencyJSON(nlohmann::json json, \textcolor{keywordtype}{size\_t} participant\_count, std::string error\_preamble, Tendency \&out\_tendency);}
\DoxyCodeLine{150 }
\DoxyCodeLine{151         \textcolor{keyword}{template} <\textcolor{keyword}{typename} T1, nlohmann::detail::value\_t T2>}
\DoxyCodeLine{152         \textcolor{keywordtype}{bool} ReadJsonValueFromDictionary(T1 \&out\_value, nlohmann::json json, std::string key, \textcolor{keywordtype}{bool} required, std::string error\_preamble = \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{153         \{}
\DoxyCodeLine{154             \textcolor{keywordflow}{if} (!json.contains(key))}
\DoxyCodeLine{155             \{}
\DoxyCodeLine{156                 \textcolor{keywordflow}{if} (required)}
\DoxyCodeLine{157                 \{}
\DoxyCodeLine{158                     TALE\_ERROR\_PRINT(fmt::format(\textcolor{stringliteral}{"{}\{\}JSON DID NOT CONTAIN KEY \{\}"{}}, error\_preamble, key));}
\DoxyCodeLine{159                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{160                 \}}
\DoxyCodeLine{161             \}}
\DoxyCodeLine{162             \textcolor{keywordflow}{else}}
\DoxyCodeLine{163             \{}
\DoxyCodeLine{164                 \textcolor{keywordflow}{if} (json[key].type() == T2)}
\DoxyCodeLine{165                 \{}
\DoxyCodeLine{166                     out\_value = json[key];}
\DoxyCodeLine{167                 \}}
\DoxyCodeLine{168                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{169                 \{}
\DoxyCodeLine{170                     TALE\_ERROR\_PRINT(fmt::format(\textcolor{stringliteral}{"{}\{\}VALUE FOR KEY \{\} WAS OF AN INCORRECT TYPE"{}}, error\_preamble, key));}
\DoxyCodeLine{171                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{172                 \}}
\DoxyCodeLine{173             \}}
\DoxyCodeLine{174             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{175         \}}
\DoxyCodeLine{176 }
\DoxyCodeLine{177         \textcolor{keyword}{template} <\textcolor{keyword}{typename} T1, nlohmann::detail::value\_t T2>}
\DoxyCodeLine{178         \textcolor{keywordtype}{bool} ReadJsonValueFromArray(T1 \&out\_value, nlohmann::json json, \textcolor{keywordtype}{size\_t} index, \textcolor{keywordtype}{bool} required, std::string error\_preamble = \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{179         \{}
\DoxyCodeLine{180             \textcolor{keywordflow}{if} (json.size() <= index)}
\DoxyCodeLine{181             \{}
\DoxyCodeLine{182                 \textcolor{keywordflow}{if} (required)}
\DoxyCodeLine{183                 \{}
\DoxyCodeLine{184                     TALE\_ERROR\_PRINT(fmt::format(\textcolor{stringliteral}{"{}\{\}JSON DID NOT CONTAIN INDEX \{\}"{}}, error\_preamble, index));}
\DoxyCodeLine{185                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{186                 \}}
\DoxyCodeLine{187             \}}
\DoxyCodeLine{188             \textcolor{keywordflow}{else}}
\DoxyCodeLine{189             \{}
\DoxyCodeLine{190                 \textcolor{keywordflow}{if} (json[index].type() == T2)}
\DoxyCodeLine{191                 \{}
\DoxyCodeLine{192                     out\_value = json[index];}
\DoxyCodeLine{193                 \}}
\DoxyCodeLine{194                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{195                 \{}
\DoxyCodeLine{196                     TALE\_ERROR\_PRINT(fmt::format(\textcolor{stringliteral}{"{}\{\}VALUE FOR INDEX \{\} WAS OF AN INCORRECT TYPE"{}}, error\_preamble, index));}
\DoxyCodeLine{197                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{198                 \}}
\DoxyCodeLine{199             \}}
\DoxyCodeLine{200             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{201         \}}
\DoxyCodeLine{202 }
\DoxyCodeLine{203         \textcolor{keywordtype}{bool} CheckCorrectValueRange(\textcolor{keywordtype}{float} value, std::string error\_preamble = \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{204     \};}
\DoxyCodeLine{205 \} \textcolor{comment}{// namespace tale}}
\DoxyCodeLine{206 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// TALE\_GLOBALS\_INTERACTIONSTORE\_H}}

\end{DoxyCode}
